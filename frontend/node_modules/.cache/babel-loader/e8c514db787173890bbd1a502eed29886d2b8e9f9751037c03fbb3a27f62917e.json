{"ast":null,"code":"var _jsxFileName = \"/app/frontend/src/App.js\",\n  _s = $RefreshSig$();\nimport { useState, useEffect } from \"react\";\nimport \"@/App.css\";\nimport { BrowserRouter, Routes, Route, Navigate } from \"react-router-dom\";\nimport axios from \"axios\";\nimport Landing from \"@/pages/Landing\";\nimport Dashboard from \"@/pages/Dashboard\";\nimport Settings from \"@/pages/Settings\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst BACKEND_URL = process.env.REACT_APP_BACKEND_URL;\nconst API = `${BACKEND_URL}/api`;\nfunction App() {\n  _s();\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\n  const [user, setUser] = useState(null);\n  const [loading, setLoading] = useState(true);\n  useEffect(() => {\n    checkSession();\n  }, []);\n  const checkSession = async () => {\n    try {\n      // Check for session_id in URL hash (from Google OAuth)\n      const hash = window.location.hash;\n      if (hash.includes('session_id=')) {\n        const sessionId = hash.split('session_id=')[1].split('&')[0];\n\n        // Exchange session_id for user data\n        const response = await axios.get(`${API}/auth/session`, {\n          headers: {\n            'X-Session-ID': sessionId\n          },\n          withCredentials: true\n        });\n        if (response.data.authenticated) {\n          setIsAuthenticated(true);\n          setUser(response.data.user);\n        }\n\n        // Clean URL\n        window.history.replaceState({}, document.title, window.location.pathname);\n      } else {\n        // Check existing session\n        const response = await axios.get(`${API}/auth/session`, {\n          withCredentials: true\n        });\n        if (response.data.authenticated) {\n          setIsAuthenticated(true);\n          setUser(response.data.user);\n        }\n      }\n    } catch (error) {\n      console.error('Session check failed:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleLogout = async () => {\n    try {\n      await axios.post(`${API}/auth/logout`, {}, {\n        withCredentials: true\n      });\n      setIsAuthenticated(false);\n      setUser(null);\n    } catch (error) {\n      console.error('Logout failed:', error);\n    }\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center justify-center min-h-screen bg-gradient-to-br from-sky-50 to-blue-100\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"inline-block animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-600\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"mt-4 text-gray-600\",\n          children: \"Loading...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: /*#__PURE__*/_jsxDEV(BrowserRouter, {\n      children: /*#__PURE__*/_jsxDEV(Routes, {\n        children: [/*#__PURE__*/_jsxDEV(Route, {\n          path: \"/\",\n          element: isAuthenticated ? /*#__PURE__*/_jsxDEV(Navigate, {\n            to: \"/dashboard\",\n            replace: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 17\n          }, this) : /*#__PURE__*/_jsxDEV(Landing, {\n            setIsAuthenticated: setIsAuthenticated,\n            setUser: setUser\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          path: \"/dashboard\",\n          element: isAuthenticated ? /*#__PURE__*/_jsxDEV(Dashboard, {\n            user: user,\n            onLogout: handleLogout\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 17\n          }, this) : /*#__PURE__*/_jsxDEV(Navigate, {\n            to: \"/\",\n            replace: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          path: \"/settings\",\n          element: isAuthenticated ? /*#__PURE__*/_jsxDEV(Settings, {\n            user: user,\n            onLogout: handleLogout\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 108,\n            columnNumber: 17\n          }, this) : /*#__PURE__*/_jsxDEV(Navigate, {\n            to: \"/\",\n            replace: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 110,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 81,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"mKb+zX9grAar2iMVStuBBwt7fpw=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["useState","useEffect","BrowserRouter","Routes","Route","Navigate","axios","Landing","Dashboard","Settings","jsxDEV","_jsxDEV","BACKEND_URL","process","env","REACT_APP_BACKEND_URL","API","App","_s","isAuthenticated","setIsAuthenticated","user","setUser","loading","setLoading","checkSession","hash","window","location","includes","sessionId","split","response","get","headers","withCredentials","data","authenticated","history","replaceState","document","title","pathname","error","console","handleLogout","post","className","children","fileName","_jsxFileName","lineNumber","columnNumber","path","element","to","replace","onLogout","_c","$RefreshReg$"],"sources":["/app/frontend/src/App.js"],"sourcesContent":["import { useState, useEffect } from \"react\";\nimport \"@/App.css\";\nimport { BrowserRouter, Routes, Route, Navigate } from \"react-router-dom\";\nimport axios from \"axios\";\nimport Landing from \"@/pages/Landing\";\nimport Dashboard from \"@/pages/Dashboard\";\nimport Settings from \"@/pages/Settings\";\n\nconst BACKEND_URL = process.env.REACT_APP_BACKEND_URL;\nconst API = `${BACKEND_URL}/api`;\n\nfunction App() {\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\n  const [user, setUser] = useState(null);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    checkSession();\n  }, []);\n\n  const checkSession = async () => {\n    try {\n      // Check for session_id in URL hash (from Google OAuth)\n      const hash = window.location.hash;\n      if (hash.includes('session_id=')) {\n        const sessionId = hash.split('session_id=')[1].split('&')[0];\n        \n        // Exchange session_id for user data\n        const response = await axios.get(`${API}/auth/session`, {\n          headers: { 'X-Session-ID': sessionId },\n          withCredentials: true\n        });\n        \n        if (response.data.authenticated) {\n          setIsAuthenticated(true);\n          setUser(response.data.user);\n        }\n        \n        // Clean URL\n        window.history.replaceState({}, document.title, window.location.pathname);\n      } else {\n        // Check existing session\n        const response = await axios.get(`${API}/auth/session`, {\n          withCredentials: true\n        });\n        \n        if (response.data.authenticated) {\n          setIsAuthenticated(true);\n          setUser(response.data.user);\n        }\n      }\n    } catch (error) {\n      console.error('Session check failed:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleLogout = async () => {\n    try {\n      await axios.post(`${API}/auth/logout`, {}, { withCredentials: true });\n      setIsAuthenticated(false);\n      setUser(null);\n    } catch (error) {\n      console.error('Logout failed:', error);\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center min-h-screen bg-gradient-to-br from-sky-50 to-blue-100\">\n        <div className=\"text-center\">\n          <div className=\"inline-block animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-600\"></div>\n          <p className=\"mt-4 text-gray-600\">Loading...</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"App\">\n      <BrowserRouter>\n        <Routes>\n          <Route\n            path=\"/\"\n            element={\n              isAuthenticated ? (\n                <Navigate to=\"/dashboard\" replace />\n              ) : (\n                <Landing setIsAuthenticated={setIsAuthenticated} setUser={setUser} />\n              )\n            }\n          />\n          <Route\n            path=\"/dashboard\"\n            element={\n              isAuthenticated ? (\n                <Dashboard user={user} onLogout={handleLogout} />\n              ) : (\n                <Navigate to=\"/\" replace />\n              )\n            }\n          />\n          <Route\n            path=\"/settings\"\n            element={\n              isAuthenticated ? (\n                <Settings user={user} onLogout={handleLogout} />\n              ) : (\n                <Navigate to=\"/\" replace />\n              )\n            }\n          />\n        </Routes>\n      </BrowserRouter>\n    </div>\n  );\n}\n\nexport default App;"],"mappings":";;AAAA,SAASA,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAC3C,OAAO,WAAW;AAClB,SAASC,aAAa,EAAEC,MAAM,EAAEC,KAAK,EAAEC,QAAQ,QAAQ,kBAAkB;AACzE,OAAOC,KAAK,MAAM,OAAO;AACzB,OAAOC,OAAO,MAAM,iBAAiB;AACrC,OAAOC,SAAS,MAAM,mBAAmB;AACzC,OAAOC,QAAQ,MAAM,kBAAkB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAExC,MAAMC,WAAW,GAAGC,OAAO,CAACC,GAAG,CAACC,qBAAqB;AACrD,MAAMC,GAAG,GAAG,GAAGJ,WAAW,MAAM;AAEhC,SAASK,GAAGA,CAAA,EAAG;EAAAC,EAAA;EACb,MAAM,CAACC,eAAe,EAAEC,kBAAkB,CAAC,GAAGpB,QAAQ,CAAC,KAAK,CAAC;EAC7D,MAAM,CAACqB,IAAI,EAAEC,OAAO,CAAC,GAAGtB,QAAQ,CAAC,IAAI,CAAC;EACtC,MAAM,CAACuB,OAAO,EAAEC,UAAU,CAAC,GAAGxB,QAAQ,CAAC,IAAI,CAAC;EAE5CC,SAAS,CAAC,MAAM;IACdwB,YAAY,CAAC,CAAC;EAChB,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMA,YAAY,GAAG,MAAAA,CAAA,KAAY;IAC/B,IAAI;MACF;MACA,MAAMC,IAAI,GAAGC,MAAM,CAACC,QAAQ,CAACF,IAAI;MACjC,IAAIA,IAAI,CAACG,QAAQ,CAAC,aAAa,CAAC,EAAE;QAChC,MAAMC,SAAS,GAAGJ,IAAI,CAACK,KAAK,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,CAACA,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;;QAE5D;QACA,MAAMC,QAAQ,GAAG,MAAM1B,KAAK,CAAC2B,GAAG,CAAC,GAAGjB,GAAG,eAAe,EAAE;UACtDkB,OAAO,EAAE;YAAE,cAAc,EAAEJ;UAAU,CAAC;UACtCK,eAAe,EAAE;QACnB,CAAC,CAAC;QAEF,IAAIH,QAAQ,CAACI,IAAI,CAACC,aAAa,EAAE;UAC/BjB,kBAAkB,CAAC,IAAI,CAAC;UACxBE,OAAO,CAACU,QAAQ,CAACI,IAAI,CAACf,IAAI,CAAC;QAC7B;;QAEA;QACAM,MAAM,CAACW,OAAO,CAACC,YAAY,CAAC,CAAC,CAAC,EAAEC,QAAQ,CAACC,KAAK,EAAEd,MAAM,CAACC,QAAQ,CAACc,QAAQ,CAAC;MAC3E,CAAC,MAAM;QACL;QACA,MAAMV,QAAQ,GAAG,MAAM1B,KAAK,CAAC2B,GAAG,CAAC,GAAGjB,GAAG,eAAe,EAAE;UACtDmB,eAAe,EAAE;QACnB,CAAC,CAAC;QAEF,IAAIH,QAAQ,CAACI,IAAI,CAACC,aAAa,EAAE;UAC/BjB,kBAAkB,CAAC,IAAI,CAAC;UACxBE,OAAO,CAACU,QAAQ,CAACI,IAAI,CAACf,IAAI,CAAC;QAC7B;MACF;IACF,CAAC,CAAC,OAAOsB,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAAC,uBAAuB,EAAEA,KAAK,CAAC;IAC/C,CAAC,SAAS;MACRnB,UAAU,CAAC,KAAK,CAAC;IACnB;EACF,CAAC;EAED,MAAMqB,YAAY,GAAG,MAAAA,CAAA,KAAY;IAC/B,IAAI;MACF,MAAMvC,KAAK,CAACwC,IAAI,CAAC,GAAG9B,GAAG,cAAc,EAAE,CAAC,CAAC,EAAE;QAAEmB,eAAe,EAAE;MAAK,CAAC,CAAC;MACrEf,kBAAkB,CAAC,KAAK,CAAC;MACzBE,OAAO,CAAC,IAAI,CAAC;IACf,CAAC,CAAC,OAAOqB,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAAC,gBAAgB,EAAEA,KAAK,CAAC;IACxC;EACF,CAAC;EAED,IAAIpB,OAAO,EAAE;IACX,oBACEZ,OAAA;MAAKoC,SAAS,EAAC,yFAAyF;MAAAC,QAAA,eACtGrC,OAAA;QAAKoC,SAAS,EAAC,aAAa;QAAAC,QAAA,gBAC1BrC,OAAA;UAAKoC,SAAS,EAAC;QAAwF;UAAAE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAM,CAAC,eAC9GzC,OAAA;UAAGoC,SAAS,EAAC,oBAAoB;UAAAC,QAAA,EAAC;QAAU;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAG,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAC7C;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CAAC;EAEV;EAEA,oBACEzC,OAAA;IAAKoC,SAAS,EAAC,KAAK;IAAAC,QAAA,eAClBrC,OAAA,CAACT,aAAa;MAAA8C,QAAA,eACZrC,OAAA,CAACR,MAAM;QAAA6C,QAAA,gBACLrC,OAAA,CAACP,KAAK;UACJiD,IAAI,EAAC,GAAG;UACRC,OAAO,EACLnC,eAAe,gBACbR,OAAA,CAACN,QAAQ;YAACkD,EAAE,EAAC,YAAY;YAACC,OAAO;UAAA;YAAAP,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAAC,gBAEpCzC,OAAA,CAACJ,OAAO;YAACa,kBAAkB,EAAEA,kBAAmB;YAACE,OAAO,EAAEA;UAAQ;YAAA2B,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE;QAEvE;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACF,CAAC,eACFzC,OAAA,CAACP,KAAK;UACJiD,IAAI,EAAC,YAAY;UACjBC,OAAO,EACLnC,eAAe,gBACbR,OAAA,CAACH,SAAS;YAACa,IAAI,EAAEA,IAAK;YAACoC,QAAQ,EAAEZ;UAAa;YAAAI,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAAC,gBAEjDzC,OAAA,CAACN,QAAQ;YAACkD,EAAE,EAAC,GAAG;YAACC,OAAO;UAAA;YAAAP,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE;QAE7B;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACF,CAAC,eACFzC,OAAA,CAACP,KAAK;UACJiD,IAAI,EAAC,WAAW;UAChBC,OAAO,EACLnC,eAAe,gBACbR,OAAA,CAACF,QAAQ;YAACY,IAAI,EAAEA,IAAK;YAACoC,QAAQ,EAAEZ;UAAa;YAAAI,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAAC,gBAEhDzC,OAAA,CAACN,QAAQ;YAACkD,EAAE,EAAC,GAAG;YAACC,OAAO;UAAA;YAAAP,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE;QAE7B;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACF,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACI;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACI;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACb,CAAC;AAEV;AAAClC,EAAA,CA1GQD,GAAG;AAAAyC,EAAA,GAAHzC,GAAG;AA4GZ,eAAeA,GAAG;AAAC,IAAAyC,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}